{"ast":null,"code":"var _jsxFileName = \"C:\\\\Proyectos\\\\ITAM_System\\\\itam_frontend\\\\src\\\\pages\\\\masterdata\\\\MarcaFormModal.js\",\n  _s = $RefreshSig$();\n// itam_frontend/src/pages/masterdata/MarcaFormModal.js\n\nimport React, { useState, useEffect } from 'react';\nimport Modal from '../../components/Modal';\nimport { createMarca, updateMarca } from '../../api';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MarcaFormModal = ({\n  show,\n  onClose,\n  onSaveSuccess,\n  marcaToEdit\n}) => {\n  _s();\n  const [formData, setFormData] = useState({\n    name: '',\n    description: ''\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  useEffect(() => {\n    if (marcaToEdit) {\n      setFormData({\n        name: marcaToEdit.name,\n        description: marcaToEdit.description || ''\n      });\n    } else {\n      setFormData({\n        name: '',\n        description: ''\n      });\n    }\n  }, [marcaToEdit]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Limpiar errores al cambiar el input\n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: null\n      }));\n    }\n  };\n  const validate = () => {\n    const newErrors = {};\n    if (!formData.name) newErrors.name = 'El nombre es obligatorio.';\n    return newErrors;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const findErrors = validate();\n    if (Object.keys(findErrors).length > 0) {\n      setErrors(findErrors);\n      return;\n    }\n    setLoading(true);\n    try {\n      if (marcaToEdit) {\n        await updateMarca(marcaToEdit.id, formData);\n        toast.success('Marca actualizada exitosamente!');\n      } else {\n        await createMarca(formData);\n        toast.success('Marca creada exitosamente!');\n      }\n      onSaveSuccess();\n      onClose();\n    } catch (error) {\n      var _error$response, _error$response2, _error$response2$data, _error$response3;\n      console.error('Error saving marca:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      const errorMsg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.detail) || 'Error al guardar la marca.';\n      toast.error(errorMsg);\n      setErrors(((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || {});\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: show,\n    onClose: onClose,\n    title: marcaToEdit ? \"Editar Marca\" : \"Crear Marca\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Nombre\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          value: formData.name,\n          onChange: handleChange,\n          className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this), errors.name && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-sm text-red-600\",\n          children: errors.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700\",\n          children: \"Descripci\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          value: formData.description,\n          onChange: handleChange,\n          rows: \"3\",\n          className: \"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: onClose,\n          className: \"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\",\n          disabled: loading,\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500\",\n          disabled: loading,\n          children: loading ? 'Guardando...' : 'Guardar'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n_s(MarcaFormModal, \"/hewquEb0rSyuerZx9bPZlF+ypI=\");\n_c = MarcaFormModal;\nexport default MarcaFormModal;\nvar _c;\n$RefreshReg$(_c, \"MarcaFormModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","createMarca","updateMarca","toast","jsxDEV","_jsxDEV","MarcaFormModal","show","onClose","onSaveSuccess","marcaToEdit","_s","formData","setFormData","name","description","loading","setLoading","errors","setErrors","handleChange","e","value","target","prev","validate","newErrors","handleSubmit","preventDefault","findErrors","Object","keys","length","id","success","error","_error$response","_error$response2","_error$response2$data","_error$response3","console","response","data","message","errorMsg","detail","title","children","onSubmit","className","fileName","_jsxFileName","lineNumber","columnNumber","type","onChange","rows","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Proyectos/ITAM_System/itam_frontend/src/pages/masterdata/MarcaFormModal.js"],"sourcesContent":["// itam_frontend/src/pages/masterdata/MarcaFormModal.js\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport Modal from '../../components/Modal';\r\nimport { createMarca, updateMarca } from '../../api';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst MarcaFormModal = ({ show, onClose, onSaveSuccess, marcaToEdit }) => {\r\n    const [formData, setFormData] = useState({\r\n        name: '',\r\n        description: '',\r\n    });\r\n    const [loading, setLoading] = useState(false);\r\n    const [errors, setErrors] = useState({});\r\n\r\n    useEffect(() => {\r\n        if (marcaToEdit) {\r\n            setFormData({\r\n                name: marcaToEdit.name,\r\n                description: marcaToEdit.description || '',\r\n            });\r\n        } else {\r\n            setFormData({\r\n                name: '',\r\n                description: '',\r\n            });\r\n        }\r\n    }, [marcaToEdit]);\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n        // Limpiar errores al cambiar el input\r\n        if (errors[name]) {\r\n            setErrors(prev => ({ ...prev, [name]: null }));\r\n        }\r\n    };\r\n\r\n    const validate = () => {\r\n        const newErrors = {};\r\n        if (!formData.name) newErrors.name = 'El nombre es obligatorio.';\r\n        return newErrors;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        const findErrors = validate();\r\n        if (Object.keys(findErrors).length > 0) {\r\n            setErrors(findErrors);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            if (marcaToEdit) {\r\n                await updateMarca(marcaToEdit.id, formData);\r\n                toast.success('Marca actualizada exitosamente!');\r\n            } else {\r\n                await createMarca(formData);\r\n                toast.success('Marca creada exitosamente!');\r\n            }\r\n            onSaveSuccess();\r\n            onClose();\r\n        } catch (error) {\r\n            console.error('Error saving marca:', error.response?.data || error.message);\r\n            const errorMsg = error.response?.data?.detail || 'Error al guardar la marca.';\r\n            toast.error(errorMsg);\r\n            setErrors(error.response?.data || {});\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal show={show} onClose={onClose} title={marcaToEdit ? \"Editar Marca\" : \"Crear Marca\"}>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Nombre</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"name\"\r\n                        value={formData.name}\r\n                        onChange={handleChange}\r\n                        className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\r\n                    />\r\n                    {errors.name && <p className=\"mt-1 text-sm text-red-600\">{errors.name}</p>}\r\n                </div>\r\n                <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700\">Descripci√≥n</label>\r\n                    <textarea\r\n                        name=\"description\"\r\n                        value={formData.description}\r\n                        onChange={handleChange}\r\n                        rows=\"3\"\r\n                        className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500\"\r\n                    ></textarea>\r\n                </div>\r\n                <div className=\"flex justify-end space-x-2\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50\"\r\n                        disabled={loading}\r\n                    >\r\n                        Cancelar\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\r\n                        disabled={loading}\r\n                    >\r\n                        {loading ? 'Guardando...' : 'Guardar'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default MarcaFormModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}